import{b as E,d as s,f as S,g as I,j as R,k as w,l as P,m as T,n as N,o as q,p as M,r as A}from"./chunk-D7OGTJNG.js";import{Bb as v,Ha as g,Ia as u,Ib as x,Lb as _,Nb as b,Qb as h,Sb as y,Tb as C,Wa as o,aa as a,ga as f,ka as c,oa as m,wa as l,xa as i,ya as t,za as p}from"./chunk-JXKQ7VXO.js";import"./chunk-ODN5LVDJ.js";function L(e,r){e&1&&(i(0,"div"),o(1,"L'email \xE8 richiesta"),t())}function D(e,r){e&1&&(i(0,"div"),o(1,"Inserisci un'email valida"),t())}function G(e,r){if(e&1&&(i(0,"div",24),m(1,L,2,0,"div",25)(2,D,2,0,"div",25),t()),e&2){let n=u();a(),l("ngIf",n.f.email.errors==null?null:n.f.email.errors.required),a(),l("ngIf",n.f.email.errors==null?null:n.f.email.errors.email)}}function j(e,r){e&1&&(i(0,"div"),o(1,"La password \xE8 richiesta"),t())}function H(e,r){e&1&&(i(0,"div"),o(1,"Minimo 6 caratteri"),t())}function O(e,r){if(e&1&&(i(0,"div",24),m(1,j,2,0,"div",25)(2,H,2,0,"div",25),t()),e&2){let n=u(2);a(),l("ngIf",n.f.password.errors==null?null:n.f.password.errors.required),a(),l("ngIf",n.f.password.errors==null?null:n.f.password.errors.minlength)}}function k(e,r){if(e&1&&(i(0,"div",6)(1,"label",7),o(2,"Password"),t(),p(3,"input",26),m(4,O,3,2,"div",9),t()),e&2){let n=u();a(4),l("ngIf",n.f.password.touched&&n.f.password.invalid)}}function z(e,r){e&1&&(i(0,"div"),o(1,"Il nome \xE8 richiesto"),t())}function B(e,r){if(e&1&&(i(0,"div",24),m(1,z,2,0,"div",25),t()),e&2){let n=u();a(),l("ngIf",n.f.name.errors==null?null:n.f.name.errors.required)}}function $(e,r){e&1&&(i(0,"div"),o(1,"Il cognome \xE8 richiesto"),t())}function J(e,r){if(e&1&&(i(0,"div",24),m(1,$,2,0,"div",25),t()),e&2){let n=u();a(),l("ngIf",n.f.surname.errors==null?null:n.f.surname.errors.required)}}function K(e,r){e&1&&(i(0,"div"),o(1,"La data di nascita \xE8 richiesta"),t())}function Q(e,r){if(e&1&&(i(0,"div",24),m(1,K,2,0,"div",25),t()),e&2){let n=u();a(),l("ngIf",n.f.dob.errors==null?null:n.f.dob.errors.required)}}function U(e,r){e&1&&(i(0,"div"),o(1,"Il sesso \xE8 richiesto"),t())}function W(e,r){if(e&1&&(i(0,"div",24),m(1,U,2,0,"div",25),t()),e&2){let n=u();a(),l("ngIf",n.f.gender.errors==null?null:n.f.gender.errors.required)}}function X(e,r){e&1&&(i(0,"div"),o(1,"Il numero di telefono deve contenere solo numeri"),t())}function Y(e,r){if(e&1&&(i(0,"div",24),m(1,X,2,0,"div",25),t()),e&2){let n=u();a(),l("ngIf",n.f.phone.errors==null?null:n.f.phone.errors.pattern)}}function Z(e,r){e&1&&(i(0,"div"),o(1,"La citt\xE0 \xE8 richiesta"),t())}function ee(e,r){if(e&1&&(i(0,"div",24),m(1,Z,2,0,"div",25),t()),e&2){let n=u();a(),l("ngIf",n.f.city.errors==null?null:n.f.city.errors.required)}}var F=class e{constructor(r,n,d,V){this.fb=r;this.http=n;this.route=d;this.router=V;this.form=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]],name:["",s.required],surname:["",s.required],dob:["",s.required],gender:["",s.required],phone:["",[s.pattern(/^[0-9]*$/)]],city:["",s.required],providerId:[""]})}form;isSubmitting=!1;errorMessage="";ngOnInit(){this.route.queryParams.subscribe(r=>{r.email&&r.id&&(this.form.patchValue({email:r.email,providerId:r.id}),this.form.get("email")?.disable(),this.form.get("password")?.clearValidators(),this.form.get("password")?.updateValueAndValidity())})}onRegister(){if(this.form.invalid){this.form.markAllAsTouched();return}this.isSubmitting=!0,this.errorMessage="",this.http.post("/api/auth/register",this.form.getRawValue()).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigate(["/"])},error:r=>{console.error("Errore registrazione:",r),this.errorMessage=r?.error?.message||"Errore durante la registrazione",this.isSubmitting=!1}})}get f(){return this.form.controls}static \u0275fac=function(n){return new(n||e)(f(M),f(_),f(h),f(y))};static \u0275cmp=c({type:e,selectors:[["app-registration-page"]],decls:59,vars:9,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-50","px-4"],[1,"w-full","max-w-3xl","p-10","bg-white","rounded-3xl","shadow-xl","border","border-gray-100"],[1,"text-3xl","font-extrabold","text-center","text-blue-800","mb-6"],[1,"text-center","text-gray-500","mb-8"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"sm:col-span-2"],[1,"block","text-gray-700","font-medium","mb-1"],["formControlName","email","type","email","placeholder","esempio@email.com",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["class","sm:col-span-2",4,"ngIf"],["formControlName","name","type","text","placeholder","Nome",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"],["formControlName","surname","type","text","placeholder","Cognome",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"],["formControlName","dob","type","date",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"],["formControlName","gender",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"],["value","","disabled",""],["value","male"],["value","female"],["value","other"],["formControlName","phone","type","tel","placeholder","123-456-7890",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"],["formControlName","city","type","text","placeholder","Roma",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"],["type","submit",1,"w-full","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","font-semibold","rounded-xl","shadow-md","hover:from-blue-700","hover:to-indigo-700","transform","hover:-translate-y-0.5","transition-all"],[1,"mt-6","text-center","text-gray-500"],["routerLink","/login",1,"text-blue-600","font-semibold","hover:underline"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"],["formControlName","password","type","password","placeholder","********",1,"w-full","px-4","py-3","border","rounded-xl","focus:ring-2","focus:ring-blue-400","focus:border-blue-400","transition"]],template:function(n,d){n&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),o(3," Crea il tuo account "),t(),i(4,"p",3),o(5," Inserisci i tuoi dati qui sotto "),t(),i(6,"form",4),g("ngSubmit",function(){return d.onRegister()}),i(7,"div",5)(8,"div",6)(9,"label",7),o(10,"Email"),t(),p(11,"input",8),m(12,G,3,2,"div",9),t(),m(13,k,5,1,"div",10),t(),i(14,"div",5)(15,"div")(16,"label",7),o(17,"Nome"),t(),p(18,"input",11),m(19,B,2,1,"div",9),t(),i(20,"div")(21,"label",7),o(22,"Cognome"),t(),p(23,"input",12),m(24,J,2,1,"div",9),t(),i(25,"div")(26,"label",7),o(27,"Data di nascita"),t(),p(28,"input",13),m(29,Q,2,1,"div",9),t(),i(30,"div")(31,"label",7),o(32,"Sesso"),t(),i(33,"select",14)(34,"option",15),o(35,"Seleziona"),t(),i(36,"option",16),o(37,"Maschio"),t(),i(38,"option",17),o(39,"Femmina"),t(),i(40,"option",18),o(41,"Altro"),t()(),m(42,W,2,1,"div",9),t(),i(43,"div")(44,"label",7),o(45,"Telefono"),t(),p(46,"input",19),m(47,Y,2,1,"div",9),t(),i(48,"div")(49,"label",7),o(50,"Citt\xE0"),t(),p(51,"input",20),m(52,ee,2,1,"div",9),t()(),i(53,"button",21),o(54," Registrati "),t()(),i(55,"p",22),o(56," Hai gi\xE0 un account? "),i(57,"a",23),o(58,"Accedi"),t()()()()),n&2&&(a(6),l("formGroup",d.form),a(6),l("ngIf",d.f.email.touched&&d.f.email.invalid),a(),l("ngIf",!d.f.providerId.value),a(6),l("ngIf",d.f.name.touched&&d.f.name.invalid),a(5),l("ngIf",d.f.surname.touched&&d.f.surname.invalid),a(5),l("ngIf",d.f.dob.touched&&d.f.dob.invalid),a(13),l("ngIf",d.f.gender.touched&&d.f.gender.invalid),a(5),l("ngIf",d.f.phone.touched&&d.f.phone.invalid),a(5),l("ngIf",d.f.city.touched&&d.f.city.invalid))},dependencies:[x,v,A,R,N,q,E,T,S,I,w,P,b,C],encapsulation:2})};export{F as RegistrationPageComponent};

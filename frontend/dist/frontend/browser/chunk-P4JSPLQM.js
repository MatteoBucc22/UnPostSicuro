import{a as R}from"./chunk-KA5JLKJL.js";import{a as N}from"./chunk-ZJTELT46.js";import{a as M}from"./chunk-BM7MHGYW.js";import"./chunk-X5YLR3NI.js";import{$ as k,Ab as S,Bb as D,C as x,Da as _,Ea as A,F as g,Fa as C,Ha as w,I as v,Ia as m,Ib as B,J as h,Lb as j,Qb as O,Sa as y,Tb as T,Vb as U,Wa as s,Ya as d,aa as r,db as F,ga as p,jb as I,ka as E,oa as b,wa as l,xa as n,ya as a,za as c}from"./chunk-JXKQ7VXO.js";import"./chunk-ODN5LVDJ.js";var u=class t{constructor(o){this.http=o}apiUrl="https://unpostsicuro.onrender.com/ebooks";getEbook(o){return this.http.get(`${this.apiUrl}/${o}`)}getAllEbooks(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||t)(g(j))};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})};var $=t=>["/specialists",t];function z(t,o){if(t&1&&(_(0),n(1,"a",20),s(2),a(),A()),t&2){let e=m(2);r(),l("routerLink",F(2,$,e.ebook.author_id)),r(),d(" di ",e.ebook.author," ")}}function P(t,o){if(t&1&&s(0),t&2){let e=m(2);d(" di ",e.ebook.author," ")}}function q(t,o){if(t&1&&c(0,"app-ebook-card",21),t&2){let e=o.$implicit;l("ebook",e)}}function G(t,o){if(t&1){let e=C();n(0,"div",2)(1,"div",3)(2,"div",4),c(3,"img",5),a(),n(4,"h1",6),s(5),a(),n(6,"p",7),b(7,z,3,4,"ng-container",8)(8,P,1,1,"ng-template",null,0,I),a(),n(10,"p",9),s(11),a(),c(12,"div",10),n(13,"div",11)(14,"button",12),c(15,"i",13),s(16," Leggi estratto "),a(),n(17,"button",14),w("click",function(){v(e);let f=m();return h(f.addToCart())}),c(18,"i",15),s(19),a()()(),n(20,"div",16)(21,"h2",17),s(22," Non \xE8 la risorsa giusta per te? "),a(),n(23,"div",18),b(24,q,1,1,"app-ebook-card",19),a()()()}if(t&2){let e=y(9),i=m();r(3),l("src",i.ebook.image_url||"https://via.placeholder.com/300x400",k)("alt",i.ebook.title),r(2),d(" ",i.ebook.title," "),r(2),l("ngIf",i.ebook.author_id)("ngIfElse",e),r(4),d(" ",i.ebook.description," "),r(6),l("disabled",i.isAdding),r(2),d(" ",i.isAdding?"Aggiungo...":"Aggiungi al carrello"," "),r(5),l("ngForOf",i.recommendedEbooks)}}var L=class t{constructor(o,e,i,f){this.route=o;this.ebookService=e;this.cartService=i;this.auth=f}ebook;recommendedEbooks=[];user;isAdding=!1;ngOnInit(){this.auth.currentAppUser.subscribe(e=>this.user=e);let o=this.route.snapshot.paramMap.get("id");o&&(this.ebookService.getEbook(o).subscribe({next:e=>this.ebook=e,error:e=>console.error("Errore caricamento ebook:",e)}),this.ebookService.getAllEbooks().subscribe({next:e=>{this.recommendedEbooks=e.filter(i=>i.id!==o).slice(0,4)},error:e=>console.error("Errore caricamento consigliati:",e)}))}addToCart(){if(!this.user?.id||!this.ebook?.id){console.warn("Manca user.id o ebook.id");return}this.isAdding=!0,this.cartService.addToCart(this.user.id,this.ebook.id).subscribe({next:()=>{this.isAdding=!1,alert("Ebook aggiunto al carrello! \u2705")},error:o=>{this.isAdding=!1,console.error("Errore aggiunta al carrello:",o),alert("Errore durante l'aggiunta al carrello \u274C")}})}static \u0275fac=function(e){return new(e||t)(p(O),p(u),p(R),p(M))};static \u0275cmp=E({type:t,selectors:[["app-ebook-detail"]],decls:1,vars:1,consts:[["plainAuthor",""],["class","relative min-h-screen bg-gradient-to-b from-[#FAFAFA] via-white to-[#FAFAFA] py-16 px-6",4,"ngIf"],[1,"relative","min-h-screen","bg-gradient-to-b","from-[#FAFAFA]","via-white","to-[#FAFAFA]","py-16","px-6"],[1,"max-w-4xl","mx-auto","bg-white","rounded-3xl","shadow-2xl","p-10","flex","flex-col","items-center","animate-fadeIn","border","border-[#E2E8F0]"],[1,"flex","justify-center","mb-8"],[1,"w-56","h-80","object-cover","rounded-2xl","shadow-xl","transition-transform","duration-300","hover:scale-105",3,"src","alt"],[1,"text-4xl","sm:text-5xl","font-extrabold","tracking-tight","text-transparent","bg-clip-text","bg-gradient-to-r","from-[#5EADB1]","to-[#60BFB6]","text-center","mb-2"],[1,"italic","text-[#5EADB1]","text-lg","text-center","mb-6"],[4,"ngIf","ngIfElse"],[1,"text-gray-700","text-lg","leading-relaxed","text-center","mb-8"],[1,"border-t","border-[#E2E8F0]","w-full","mb-8"],[1,"flex","flex-wrap","justify-center","gap-6","mb-12"],[1,"px-6","py-3","rounded-2xl","bg-[#5EADB1]","text-white","font-semibold","hover:bg-[#60BFB6]","shadow-lg","transition","transform","hover:-translate-y-1","flex","items-center","gap-2"],[1,"lucide","lucide-book-open"],[1,"px-6","py-3","rounded-2xl","bg-[#60BFB6]","text-white","font-semibold","hover:bg-[#5EADB1]","shadow-lg","transition","transform","hover:-translate-y-1","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"lucide","lucide-download"],[1,"max-w-6xl","mx-auto","mt-16"],[1,"text-3xl","font-bold","text-[#5EADB1]","mb-6","text-center"],[1,"flex","overflow-x-auto","gap-6","px-4","py-4","scrollbar-thin","scrollbar-thumb-[#5EADB1]/50","scrollbar-track-transparent"],["class","flex-shrink-0 w-64 h-full hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300",3,"ebook",4,"ngFor","ngForOf"],[1,"underline","hover:text-[#60BFB6]",3,"routerLink"],[1,"flex-shrink-0","w-64","h-full","hover:shadow-2xl","transform","hover:-translate-y-1","transition-all","duration-300",3,"ebook"]],template:function(e,i){e&1&&b(0,G,25,9,"div",1),e&2&&l("ngIf",i.ebook)},dependencies:[B,S,D,N,U,T],encapsulation:2})};export{L as EbookDetailComponent};
